(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.disabled=!0}function o(e,o){e.checkValidity()?function(e){e.disabled=!1}(o):t(o)}function n(e){e.classList.add("popup_opened"),document.addEventListener("keydown",c)}function r(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",c)}function c(e){"Escape"===e.key&&r(document.querySelector(".popup_opened"))}function u(e){e.target.closest(".gallery__button").classList.toggle("gallery__button_liked")}function l(e,t,o){var r=g.cloneNode(!0),c=r.querySelector(".gallery__header");c.textContent=e;var l=r.querySelector(".gallery__image");return l.src=t,l.alt=e,r.querySelector(".gallery__likes").textContent=o,r.querySelector(".gallery__trash").addEventListener("click",(function(){r.remove()})),r.querySelector(".gallery__button").addEventListener("click",u),l.addEventListener("click",(function(){L.src=l.src,L.alt=l.alt,C.textContent=c.textContent,n(E)})),r}function a(e){k.prepend(e)}e.d({},{NG:()=>k,eU:()=>E,j9:()=>L,R3:()=>C,HJ:()=>g});var i={baseUrl:"https://nomoreparties.co/v1/wbf-cohort-13",headers:{authorization:"9681f22a-cd1e-4370-b380-1a182fbcbd01","Content-Type":"application/json"}},s=document.querySelector(".profile__edit"),p=document.querySelector(".profile_add"),d=document.querySelector(".popup__profile"),f=d.querySelector(".popup__name"),_=d.querySelector(".popup__about"),m=document.querySelector(".profile__name"),y=document.querySelector(".profile__cuption"),v=document.querySelector(".profile__img"),h=document.querySelector(".popup__place"),S=h.querySelector(".place__title"),b=h.querySelector(".place__link"),q=document.querySelectorAll(".popup__close"),g=document.querySelector(".template-item").content.querySelector(".gallery__item"),k=document.querySelector(".gallery"),E=document.querySelector(".popup__photo"),L=document.querySelector(".popup__photo-content"),C=document.querySelector(".popup__photo-name"),x=document.forms.profileForm,j=document.forms.placeForm,P=document.querySelectorAll(".popup__container"),O=document.querySelectorAll(".popup"),U=h.querySelector(".popup__button");q.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(e){console.log("ClosePopupbuttons"),e.preventDefault(),r(t)}))})),s.addEventListener("click",(function(){f.value=m.textContent,_.value=y.textContent,n(d)})),p.addEventListener("click",(function(){return n(h)})),x.addEventListener("submit",(function(e){var t,o;e.preventDefault(),m.textContent=f.value,y.textContent=_.value,(t=f.value,o=_.value,fetch("".concat(i.baseUrl,"/users/me"),{method:"PATCH",headers:i.headers,body:JSON.stringify({name:t,about:o})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))).catch((function(e){console.log(e)})),x.checkValidity()&&r(d)})),j.addEventListener("submit",(function(e){var o,n;e.preventDefault(),a(l(S.value,b.value)),(o=S.value,n=b.value,fetch("".concat(i.baseUrl,"/cards"),{method:"POST",headers:i.headers,body:JSON.stringify({name:o,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))).catch((function(e){console.log(e)})),r(h),e.target.reset(),t(U)})),P.forEach((function(e){var t=e.querySelector(".popup__button");o(e,t)})),O.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&r(e)}))})),function(e,t){e.forEach((function(e){var n=e.querySelectorAll(t.inputSelector),r=e.querySelector(t.buttonSelector);n.forEach((function(t){t.addEventListener("input",(function(){o(e,r),function(e){e.validity.valid?function(e){var t="eror-"+e.id;document.getElementById(t).textContent=""}(e):function(e,t){var o="eror-"+e.id;document.getElementById(o).textContent=t}(e,e.validationMessage)}(t)}))}))}))}(P,{inputSelector:".popup__text",buttonSelector:".popup__button"}),fetch("".concat(i.baseUrl,"/users/me"),{headers:i.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){m.textContent=e.name,y.textContent=e.about,v.src=e.avatar})).catch((function(e){console.log(e)})),fetch("".concat(i.baseUrl,"/cards"),{headers:i.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){e.forEach((function(e){a(l(e.name,e.link,e.likes.length))}))})).catch((function(e){console.log(e)}))})();